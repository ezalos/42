{"dependencies":[{"name":"../core/class","data":{"isAsync":false}},{"name":"../core/path","data":{"isAsync":false}},{"name":"../core/transform","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var Class = _$$_REQUIRE(_dependencyMap[0], \"../core/class\");\n\n  var Path = _$$_REQUIRE(_dependencyMap[1], \"../core/path\");\n\n  var Transform = _$$_REQUIRE(_dependencyMap[2], \"../core/transform\");\n\n  module.exports = Class(Path, {\n    onReset: function onReset() {\n      this.points = [];\n      this.left = this.top = Infinity;\n      this.right = this.bottom = -Infinity;\n      this.width = this.height = 0;\n      this.length = 0;\n    },\n    onMove: function onMove(sx, sy, ex, ey) {\n      this.points.push(this.length, ex, ey);\n    },\n    onLine: function onLine(sx, sy, ex, ey) {\n      var x = ex - sx,\n          y = ey - sy;\n      this.points.push(this.length += Math.sqrt(x * x + y * y), ex, ey);\n      this.left = Math.min(this.left, sx, x);\n      this.right = Math.max(this.right, sx, x);\n      this.top = Math.min(this.top, sy, y);\n      this.bottom = Math.max(this.bottom, sy, y);\n      this.width = this.right - this.left;\n      this.height = this.bottom - this.top;\n    },\n    point: function point(lengthToPoint) {\n      var points = this.points,\n          last = points.length - 3,\n          next;\n      if (last < 3) return null;\n\n      for (var i = 3; i < last; i += 3) {\n        if (points[i] >= lengthToPoint) break;\n      }\n\n      var l = points[i],\n          x = points[i + 1],\n          y = points[i + 2],\n          dl = l - points[i - 3],\n          dx = x - points[i - 2],\n          dy = y - points[i - 1];\n      var offset = (l - lengthToPoint) / dl,\n          cos = dx / dl,\n          sin = dy / dl;\n      x -= dx * offset;\n      y -= dy * offset;\n      return new Transform(cos, sin, -sin, cos, x, y);\n    }\n  });\n});","map":[[2,0,1,0],[2,6,1,4,"Class"],[2,11,1,9],[2,14,1,12,"require"],[2,25,1,19],[2,61,1,0],[4,0,2,0],[4,6,2,4,"Path"],[4,10,2,8],[4,13,2,11,"require"],[4,24,2,18],[4,59,2,0],[6,0,3,0],[6,6,3,4,"Transform"],[6,15,3,13],[6,18,3,16,"require"],[6,29,3,23],[6,69,3,0],[8,0,5,0,"module"],[8,2,5,0,"module"],[8,8,5,6],[8,9,5,7,"exports"],[8,16,5,0],[8,19,5,17,"Class"],[8,24,5,22],[8,25,5,23,"Path"],[8,29,5,22],[8,31,5,29],[9,0,7,1,"onReset"],[9,4,7,1,"onReset"],[9,11,7,8],[9,13,7,10],[9,32,7,20],[10,0,8,2],[10,11,8,7,"points"],[10,17,8,2],[10,20,8,16],[10,22,8,2],[11,0,9,2],[11,11,9,7,"left"],[11,15,9,2],[11,18,9,14],[11,23,9,19,"top"],[11,26,9,14],[11,29,9,25,"Infinity"],[11,37,9,2],[12,0,10,2],[12,11,10,7,"right"],[12,16,10,2],[12,19,10,15],[12,24,10,20,"bottom"],[12,30,10,15],[12,33,10,29],[12,34,10,30,"Infinity"],[12,42,10,2],[13,0,11,2],[13,11,11,7,"width"],[13,16,11,2],[13,19,11,15],[13,24,11,20,"height"],[13,30,11,15],[13,33,11,29],[13,34,11,2],[14,0,12,2],[14,11,12,7,"length"],[14,17,12,2],[14,20,12,16],[14,21,12,2],[15,0,13,2],[15,5,5,29],[16,0,15,1,"onMove"],[16,4,15,1,"onMove"],[16,10,15,7],[16,12,15,9],[16,28,15,18,"sx"],[16,30,15,9],[16,32,15,22,"sy"],[16,34,15,9],[16,36,15,26,"ex"],[16,38,15,9],[16,40,15,30,"ey"],[16,42,15,9],[16,44,15,33],[17,0,16,2],[17,11,16,7,"points"],[17,17,16,2],[17,18,16,14,"push"],[17,22,16,2],[17,23,16,19],[17,28,16,24,"length"],[17,34,16,2],[17,36,16,32,"ex"],[17,38,16,2],[17,40,16,36,"ey"],[17,42,16,2],[18,0,17,2],[18,5,5,29],[19,0,19,1,"onLine"],[19,4,19,1,"onLine"],[19,10,19,7],[19,12,19,9],[19,28,19,18,"sx"],[19,30,19,9],[19,32,19,22,"sy"],[19,34,19,9],[19,36,19,26,"ex"],[19,38,19,9],[19,40,19,30,"ey"],[19,42,19,9],[19,44,19,33],[20,0,20,2],[20,10,20,6,"x"],[20,11,20,7],[20,14,20,10,"ex"],[20,16,20,12],[20,19,20,15,"sx"],[20,21,20,2],[21,0,20,2],[21,10,20,19,"y"],[21,11,20,20],[21,14,20,23,"ey"],[21,16,20,25],[21,19,20,28,"sy"],[21,21,20,2],[22,0,21,2],[22,11,21,7,"points"],[22,17,21,2],[22,18,21,14,"push"],[22,22,21,2],[22,23,21,20],[22,28,21,25,"length"],[22,34,21,20],[22,38,21,35,"Math"],[22,42,21,39],[22,43,21,40,"sqrt"],[22,47,21,35],[22,48,21,45,"x"],[22,49,21,46],[22,52,21,49,"x"],[22,53,21,45],[22,56,21,53,"y"],[22,57,21,54],[22,60,21,57,"y"],[22,61,21,35],[22,62,21,2],[22,64,21,62,"ex"],[22,66,21,2],[22,68,21,66,"ey"],[22,70,21,2],[23,0,22,2],[23,11,22,7,"left"],[23,15,22,2],[23,18,22,16,"Math"],[23,22,22,20],[23,23,22,21,"min"],[23,26,22,16],[23,27,22,25],[23,32,22,30,"left"],[23,36,22,16],[23,38,22,38,"sx"],[23,40,22,16],[23,42,22,42,"x"],[23,43,22,16],[23,44,22,2],[24,0,23,2],[24,11,23,7,"right"],[24,16,23,2],[24,19,23,16,"Math"],[24,23,23,20],[24,24,23,21,"max"],[24,27,23,16],[24,28,23,25],[24,33,23,30,"right"],[24,38,23,16],[24,40,23,38,"sx"],[24,42,23,16],[24,44,23,42,"x"],[24,45,23,16],[24,46,23,2],[25,0,24,2],[25,11,24,7,"top"],[25,14,24,2],[25,17,24,16,"Math"],[25,21,24,20],[25,22,24,21,"min"],[25,25,24,16],[25,26,24,25],[25,31,24,30,"top"],[25,34,24,16],[25,36,24,38,"sy"],[25,38,24,16],[25,40,24,42,"y"],[25,41,24,16],[25,42,24,2],[26,0,25,2],[26,11,25,7,"bottom"],[26,17,25,2],[26,20,25,16,"Math"],[26,24,25,20],[26,25,25,21,"max"],[26,28,25,16],[26,29,25,25],[26,34,25,30,"bottom"],[26,40,25,16],[26,42,25,38,"sy"],[26,44,25,16],[26,46,25,42,"y"],[26,47,25,16],[26,48,25,2],[27,0,26,2],[27,11,26,7,"width"],[27,16,26,2],[27,19,26,16],[27,24,26,21,"right"],[27,29,26,16],[27,32,26,29],[27,37,26,34,"left"],[27,41,26,2],[28,0,27,2],[28,11,27,7,"height"],[28,17,27,2],[28,20,27,16],[28,25,27,21,"bottom"],[28,31,27,16],[28,34,27,30],[28,39,27,35,"top"],[28,42,27,2],[29,0,28,2],[29,5,5,29],[30,0,30,1,"point"],[30,4,30,1,"point"],[30,9,30,6],[30,11,30,8],[30,26,30,17,"lengthToPoint"],[30,39,30,8],[30,41,30,31],[31,0,32,2],[31,10,32,6,"points"],[31,16,32,12],[31,19,32,15],[31,24,32,20,"points"],[31,30,32,2],[32,0,32,2],[32,10,32,28,"last"],[32,14,32,32],[32,17,32,35,"points"],[32,23,32,41],[32,24,32,42,"length"],[32,30,32,35],[32,33,32,51],[32,34,32,2],[33,0,32,2],[33,10,32,54,"next"],[33,14,32,2],[34,0,33,2],[34,10,33,6,"last"],[34,14,33,10],[34,17,33,13],[34,18,33,2],[34,20,33,16],[34,27,33,23],[34,31,33,16],[36,0,34,2],[36,11,34,7],[36,15,34,11,"i"],[36,16,34,12],[36,19,34,15],[36,20,34,2],[36,22,34,18,"i"],[36,23,34,19],[36,26,34,22,"last"],[36,30,34,2],[36,32,34,28,"i"],[36,33,34,29],[36,37,34,31],[36,38,34,2],[37,0,35,3],[37,12,35,7,"points"],[37,18,35,13],[37,19,35,14,"i"],[37,20,35,13],[37,21,35,7],[37,25,35,20,"lengthToPoint"],[37,38,35,3],[37,40,36,4],[38,0,34,2],[40,0,38,2],[40,10,38,6,"l"],[40,11,38,7],[40,14,38,10,"points"],[40,20,38,16],[40,21,38,17,"i"],[40,22,38,16],[40,23,38,2],[41,0,38,2],[41,10,39,3,"x"],[41,11,39,4],[41,14,39,7,"points"],[41,20,39,13],[41,21,39,14,"i"],[41,22,39,15],[41,25,39,16],[41,26,39,13],[41,27,38,2],[42,0,38,2],[42,10,39,20,"y"],[42,11,39,21],[42,14,39,24,"points"],[42,20,39,30],[42,21,39,31,"i"],[42,22,39,32],[42,25,39,33],[42,26,39,30],[42,27,38,2],[43,0,38,2],[43,10,41,3,"dl"],[43,12,41,5],[43,15,41,8,"l"],[43,16,41,9],[43,19,41,12,"points"],[43,25,41,18],[43,26,41,19,"i"],[43,27,41,20],[43,30,41,21],[43,31,41,18],[43,32,38,2],[44,0,38,2],[44,10,42,6,"dx"],[44,12,42,8],[44,15,42,11,"x"],[44,16,42,12],[44,19,42,15,"points"],[44,25,42,21],[44,26,42,22,"i"],[44,27,42,23],[44,30,42,24],[44,31,42,21],[44,32,38,2],[45,0,38,2],[45,10,42,28,"dy"],[45,12,42,30],[45,15,42,33,"y"],[45,16,42,34],[45,19,42,37,"points"],[45,25,42,43],[45,26,42,44,"i"],[45,27,42,45],[45,30,42,46],[45,31,42,43],[45,32,38,2],[46,0,44,2],[46,10,44,6,"offset"],[46,16,44,12],[46,19,44,15],[46,20,44,16,"l"],[46,21,44,17],[46,24,44,20,"lengthToPoint"],[46,37,44,15],[46,41,44,37,"dl"],[46,43,44,2],[47,0,44,2],[47,10,45,6,"cos"],[47,13,45,9],[47,16,45,12,"dx"],[47,18,45,14],[47,21,45,17,"dl"],[47,23,44,2],[48,0,44,2],[48,10,45,21,"sin"],[48,13,45,24],[48,16,45,27,"dy"],[48,18,45,29],[48,21,45,32,"dl"],[48,23,44,2],[49,0,46,2,"x"],[49,6,46,2,"x"],[49,7,46,3],[49,11,46,7,"dx"],[49,13,46,9],[49,16,46,12,"offset"],[49,22,46,2],[50,0,46,20,"y"],[50,6,46,20,"y"],[50,7,46,21],[50,11,46,25,"dy"],[50,13,46,27],[50,16,46,30,"offset"],[50,22,46,20],[51,0,47,2],[51,13,47,9],[51,17,47,13,"Transform"],[51,26,47,9],[51,27,47,23,"cos"],[51,30,47,9],[51,32,47,28,"sin"],[51,35,47,9],[51,37,47,33],[51,38,47,34,"sin"],[51,41,47,9],[51,43,47,39,"cos"],[51,46,47,9],[51,48,47,44,"x"],[51,49,47,9],[51,51,47,47,"y"],[51,52,47,9],[51,53,47,2],[52,0,48,2],[53,0,5,29],[53,3,5,22],[53,4,5,0]]},"type":"js/module"}]}